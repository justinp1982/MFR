<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MFR Rapid Documentation</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

    <div class="container">
        <section id="body-map-panel">
            <h2>1. Select Area</h2>
            
            <div class="mode-controls">
                <button id="btn-mode-assess" class="mode-btn" onclick="setMode('assessment')">Assessment (Red)</button>
                <button id="btn-mode-treat" class="mode-btn active" onclick="setMode('treatment')">Treatment (Green)</button>
            </div>

            <div id="svg-container">
                <svg viewBox="0 0 400 600" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" id="body-svg">
                    
                    <g id="view-front" fill="#bdc3c7" stroke="#ffffff" stroke-width="2">
                        <circle cx="200" cy="50" r="30" fill="#ecf0f1" stroke="none" />
                        <rect x="185" y="80" width="30" height="20" class="muscle-zone" id="neck-front" data-name="Cervical (Ant)" />
                        <path d="M150,100 L250,100 L230,180 L170,180 Z" class="muscle-zone" id="pecs" data-name="Pectorals" />
                        <rect x="170" y="180" width="60" height="100" class="muscle-zone" id="abs" data-name="Abdominals" />
                        <ellipse cx="130" cy="115" rx="25" ry="20" class="muscle-zone" id="delt-r" data-name="R Deltoid" />
                        <rect x="110" y="140" width="35" height="60" class="muscle-zone" id="bicep-r" data-name="R Bicep" />
                        <rect x="115" y="205" width="25" height="70" class="muscle-zone" id="forearm-r" data-name="R Forearm" />
                        <ellipse cx="270" cy="115" rx="25" ry="20" class="muscle-zone" id="delt-l" data-name="L Deltoid" />
                        <rect x="255" y="140" width="35" height="60" class="muscle-zone" id="bicep-l" data-name="L Bicep" />
                        <rect x="260" y="205" width="25" height="70" class="muscle-zone" id="forearm-l" data-name="L Forearm" />
                        <path d="M170,280 L200,280 L195,430 L175,430 Z" class="muscle-zone" id="quad-r" data-name="R Quadriceps" />
                        <path d="M200,280 L230,280 L225,430 L205,430 Z" class="muscle-zone" id="quad-l" data-name="L Quadriceps" />
                        <rect x="178" y="435" width="20" height="120" class="muscle-zone" id="shin-r" data-name="R Tibialis" />
                        <rect x="202" y="435" width="20" height="120" class="muscle-zone" id="shin-l" data-name="L Tibialis" />
                    </g>

                    <g id="view-back" class="hidden" fill="#bdc3c7" stroke="#ffffff" stroke-width="2">
                        <circle cx="200" cy="50" r="30" fill="#ecf0f1" stroke="none" />
                        <path d="M170,80 L230,80 L250,110 L150,110 Z" class="muscle-zone" id="traps" data-name="Upper Trapezius" />
                        <path d="M150,110 L250,110 L230,220 L170,220 Z" class="muscle-zone" id="lats" data-name="Latissimus Dorsi" />
                        <rect x="190" y="110" width="20" height="170" class="muscle-zone" id="spine" data-name="Paraspinals" />
                        <rect x="160" y="220" width="40" height="60" class="muscle-zone" id="glute-r" data-name="R Gluteals" />
                        <rect x="200" y="220" width="40" height="60" class="muscle-zone" id="glute-l" data-name="L Gluteals" />
                        <rect x="110" y="140" width="35" height="60" class="muscle-zone" id="tricep-r" data-name="R Tricep" />
                        <rect x="255" y="140" width="35" height="60" class="muscle-zone" id="tricep-l" data-name="L Tricep" />
                        <rect x="175" y="285" width="23" height="140" class="muscle-zone" id="hamstring-r" data-name="R Hamstring" />
                        <rect x="202" y="285" width="23" height="140" class="muscle-zone" id="hamstring-l" data-name="L Hamstring" />
                        <ellipse cx="186" cy="480" rx="15" ry="40" class="muscle-zone" id="calf-r" data-name="R Gastrocnemius" />
                        <ellipse cx="214" cy="480" rx="15" ry="40" class="muscle-zone" id="calf-l" data-name="L Gastrocnemius" />
                    </g>
                </svg>
            </div>

            <div class="view-controls">
                <button onclick="switchView('front')">Front View</button>
                <button onclick="switchView('back')">Back View</button>
            </div>
        </section>

        <section id="input-panel">
            <h2>2. Treatment Details</h2>
            <div id="form-container">
                <p class="instruction">Select a body part to begin.</p>
            </div>
        </section>

        <section id="output-panel">
            <h2>3. Output</h2>
            <div class="output-tabs">
                <button id="tab-soap" class="tab active" onclick="switchTab('soap')">SOAP Note</button>
                <button id="tab-bill" class="tab" onclick="switchTab('bill')">Superbill Data</button>
            </div>
            
            <textarea id="soap-preview" readonly placeholder="Notes will auto-generate here..."></textarea>
            
            <div id="superbill-view" class="hidden">
                <table id="billing-table">
                    <thead>
                        <tr>
                            <th>CPT Code</th>
                            <th>Description</th>
                            <th>Area</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div class="action-buttons">
                <button id="btn-settings" class="secondary-btn" style="background-color: #7f8c8d;">⚙️</button>
                <button id="btn-reset" class="secondary-btn" style="background-color: #c0392b;">New Session</button>
                <button id="btn-copy" class="primary-btn">Copy to Clipboard</button>
            </div>
        </section>
    </div>

    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>⚙️ Therapist Voice</h2>
                <span class="close-modal" onclick="toggleSettings()">&times;</span>
            </div>
            <p>Customize your default notes.</p>
            
            <label>Subjective Intro:</label>
            <input type="text" id="set-sub" class="setting-input">
            
            <label>Pain Identifier:</label>
            <input type="text" id="set-pain" class="setting-input">

            <div class="modal-actions">
                <button onclick="saveSettings()" class="primary-btn">Save Preferences</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MFR Rapid Documentation</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

    <div class="container">
        <section id="body-map-panel">
            <div class="panel-header">
                <h2>1. Select Area</h2>
            </div>
            
            <div class="mode-controls">
                <button id="btn-mode-assess" class="mode-btn" onclick="setMode('assessment')">Assessment (Red)</button>
                <button id="btn-mode-treat" class="mode-btn active" onclick="setMode('treatment')">Treatment (Green)</button>
            </div>

            <div id="svg-container">
                <svg viewBox="0 0 400 600" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" id="body-svg">
                    
                    <g id="view-front" fill="#bdc3c7" stroke="#ffffff" stroke-width="2">
                        
                        <path d="M170,50 C170,20 230,20 230,50 C230,70 215,85 200,90 C185,85 170,70 170,50 Z" class="muscle-zone" id="scalp-f" data-name="Scalp/Face" />
                        <path d="M175,55 C175,45 225,45 225,55 C225,75 200,85 200,85 C200,85 175,75 175,55 Z" class="muscle-zone" id="face" data-name="Face/Sinus" fill="#dcdde1" stroke="none"/>
                        <circle cx="188" cy="60" r="4" class="muscle-zone" id="eye-r" data-name="R Eye" fill="#fff" stroke="#999" />
                        <circle cx="212" cy="60" r="4" class="muscle-zone" id="eye-l" data-name="L Eye" fill="#fff" stroke="#999" />
                        <ellipse cx="165" cy="55" rx="6" ry="12" class="muscle-zone" id="ear-r" data-name="R Ear" />
                        <ellipse cx="235" cy="55" rx="6" ry="12" class="muscle-zone" id="ear-l" data-name="L Ear" />
                        <path d="M185,75 Q200,85 215,75 Q215,82 200,88 Q185,82 185,75 Z" class="muscle-zone" id="jaw" data-name="Jaw/TMJ" />

                        <path d="M185,88 C185,88 180,110 175,115 L225,115 C220,110 215,88 215,88 Z" class="muscle-zone" id="cervical-f" data-name="Cervical (Ant)" />
                        <path d="M160,115 C150,130 155,170 170,180 L230,180 C245,170 250,130 240,115 L215,115 L185,115 Z" class="muscle-zone" id="thoracic-f" data-name="Thoracic/Chest" />
                        <path d="M170,180 C165,200 165,220 170,235 L230,235 C235,220 235,200 230,180 Z" class="muscle-zone" id="lumbar-f" data-name="Lumbar/Abdomen" />
                        <path d="M170,235 C160,250 175,275 200,280 C225,275 240,250 230,235 Z" class="muscle-zone" id="pelvis-f" data-name="Pelvis/Hips" />

                        <circle cx="145" cy="125" r="18" class="muscle-zone" id="shldr-r" data-name="R Shoulder" />
                        <rect x="130" y="140" width="30" height="60" rx="15" ry="15" class="muscle-zone" id="uparm-r" data-name="R Upper Arm" />
                        <circle cx="145" cy="210" r="14" class="muscle-zone" id="elbow-r" data-name="R Elbow" />
                        <rect x="135" y="220" width="22" height="55" rx="10" ry="10" class="muscle-zone" id="forearm-r" data-name="R Forearm" />
                        <circle cx="146" cy="285" r="10" class="muscle-zone" id="wrist-r" data-name="R Wrist" />
                        <path d="M135,295 C125,300 125,330 135,335 C145,340 155,335 158,320 C160,310 155,300 145,295 Z" class="muscle-zone" id="hand-r" data-name="R Hand/Fingers" />

                        <circle cx="255" cy="125" r="18" class="muscle-zone" id="shldr-l" data-name="L Shoulder" />
                        <rect x="240" y="140" width="30" height="60" rx="15" ry="15" class="muscle-zone" id="uparm-l" data-name="L Upper Arm" />
                        <circle cx="255" cy="210" r="14" class="muscle-zone" id="elbow-l" data-name="L Elbow" />
                        <rect x="243" y="220" width="22" height="55" rx="10" ry="10" class="muscle-zone" id="forearm-l" data-name="L Forearm" />
                        <circle cx="254" cy="285" r="10" class="muscle-zone" id="wrist-l" data-name="L Wrist" />
                        <path d="M265,295 C275,300 275,330 265,335 C255,340 245,335 242,320 C240,310 245,300 255,295 Z" class="muscle-zone" id="hand-l" data-name="L Hand/Fingers" />

                        <path d="M175,275 C165,300 170,340 180,350 C190,340 195,300 190,275 Z" class="muscle-zone" id="thigh-r" data-name="R Upper Leg" />
                        <circle cx="182" cy="365" r="16" class="muscle-zone" id="knee-r" data-name="R Knee" />
                        <path d="M172,380 C170,400 175,440 182,450 C190,440 195,400 192,380 Z" class="muscle-zone" id="shin-r" data-name="R Lower Leg" />
                        <circle cx="182" cy="460" r="12" class="muscle-zone" id="ankle-r" data-name="R Ankle" />
                        <path d="M175,470 C165,480 165,500 180,505 L195,505 C200,500 200,480 190,470 Z" class="muscle-zone" id="foot-r" data-name="R Foot/Toes" />

                        <path d="M225,275 C235,300 230,340 220,350 C210,340 205,300 210,275 Z" class="muscle-zone" id="thigh-l" data-name="L Upper Leg" />
                        <circle cx="218" cy="365" r="16" class="muscle-zone" id="knee-l" data-name="L Knee" />
                        <path d="M228,380 C230,400 225,440 218,450 C210,440 205,400 208,380 Z" class="muscle-zone" id="shin-l" data-name="L Lower Leg" />
                        <circle cx="218" cy="460" r="12" class="muscle-zone" id="ankle-l" data-name="L Ankle" />
                        <path d="M225,470 C235,480 235,500 220,505 L205,505 C200,500 200,480 210,470 Z" class="muscle-zone" id="foot-l" data-name="L Foot/Toes" />
                    </g>

                    <g id="view-back" class="hidden" fill="#bdc3c7" stroke="#ffffff" stroke-width="2">
                        
                        <path d="M170,50 C170,20 230,20 230,50 C230,85 200,95 170,85 C170,85 170,50 170,50 Z" class="muscle-zone" id="scalp-b" data-name="Scalp/Occiput" />
                        <ellipse cx="165" cy="55" rx="6" ry="12" class="muscle-zone" id="ear-br" data-name="R Ear" />
                        <ellipse cx="235" cy="55" rx="6" ry="12" class="muscle-zone" id="ear-bl" data-name="L Ear" />

                        <path d="M185,85 C180,95 175,115 170,120 L230,120 C225,115 220,95 215,85 Z" class="muscle-zone" id="cervical-b" data-name="Cervical (Post)" />
                        <path d="M160,120 C150,140 155,175 170,190 L230,190 C245,175 250,140 240,120 Z" class="muscle-zone" id="thoracic-b" data-name="Thoracic (Post)" />
                        <path d="M170,190 C165,210 170,230 175,240 L225,240 C230,230 235,210 230,190 Z" class="muscle-zone" id="lumbar-b" data-name="Lumbar (Post)" />
